#!/usr/bin/env bash
# ----------------------------------------------------------------------
# Description
#   Find Maven projects and clean them.
#
# Arguments
#   1 (optional) the root directory where to look for Maven projects,
#                defaults to the current working directory.
# ----------------------------------------------------------------------


shopt -s globstar
for pom in ${1:-.}/**/pom.xml; do
  if [[ -f $pom && ! -f $(dirname $pom | xargs dirname)/pom.xml ]]; then
    echo "Cleaning $(dirname $pom)... "
    command mvn -f $pom clean > /dev/null
  fi
done
